BootStrap: library
From: jose_d/default/centos7_hpc_foss-2019a_gsl

%help
    Build Fast-Gadget

%post
    # load neccessary modules
    source /etc/profile.d/lmod.sh
    module use /opt/eb/modules/all
    module load foss
    module load GSL

    # data directory -- all building should be done here
    mkdir /data && cd /data
    NPROCESSES=65

    # get MP-Gadget
    git clone https://github.com/MP-Gadget/MP-Gadget.git && cd MP-Gadget
    bash bootstrap.sh
    cp Options.mk.example Options.mk

    # build MP-Gadget
    make -j $NPROCESSES

